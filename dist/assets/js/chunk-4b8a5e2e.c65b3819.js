(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b8a5e2e"],{"0c4f":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("事件信息")])]),i("div",{staticClass:"text item"},[i("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"100px"}},[i("el-form-item",{attrs:{prop:"name",label:"事件内容",rules:[{required:!0,message:"请输入事件内容",trigger:"blur"},{type:"string",message:"请输入正确的事件内容",trigger:["blur","change"]}]}},[i("el-input",{staticStyle:{width:"100%"},model:{value:e.dynamicValidateForm.name,callback:function(t){e.$set(e.dynamicValidateForm,"name",t)},expression:"dynamicValidateForm.name"}})],1),e._l(e.dynamicValidateForm.option,function(t,a){return i("el-form-item",{key:t.key,attrs:{label:"选项"+(a+1),prop:"option."+a+".value",rules:{required:!0,message:"选项不能为空",trigger:"blur"}}},[i("div",[i("el-input",{staticStyle:{width:"88%"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"option.value"}}),i("el-button",{directives:[{name:"show",rawName:"v-show",value:a>1,expression:"index > 1"}],on:{click:function(i){return i.preventDefault(),e.removeOption(t)}}},[e._v("删除")])],1)])}),i("el-form-item",{attrs:{label:"截至时间",required:""}},[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{prop:"date",rules:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}]}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期时间","picker-options":e.pickerOptions},model:{value:e.dynamicValidateForm.date,callback:function(t){e.$set(e.dynamicValidateForm,"date",t)},expression:"dynamicValidateForm.date"}})],1)],1)],1),i("el-form-item",{attrs:{prop:"addr",label:"汇报人地址",rules:[{required:!0,message:"请输入汇报人地址",trigger:"blur"},{min:42,max:42,message:"地址为42位",trigger:"blur"}]}},[i("el-input",{staticStyle:{width:"100%"},model:{value:e.dynamicValidateForm.addr,callback:function(t){e.$set(e.dynamicValidateForm,"addr",t)},expression:"dynamicValidateForm.addr"}}),i("div",{staticStyle:{color:"#ff7f00"}},[e._v(e._s("*默认为创建者地址,指定给不存在的用户地址将创建失败！"))])],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.Trading},on:{click:function(t){return e.submitForm("dynamicValidateForm")}}},[e._v("提交")]),i("el-button",{on:{click:e.addOption}},[e._v("新增选项")]),i("el-button",{on:{click:function(t){return e.resetForm("dynamicValidateForm")}}},[e._v("重置")]),e.Trading?i("span",{staticStyle:{"margin-left":"20px"}},[i("el-link",{attrs:{href:"https://ropsten.etherscan.io/tx/"+e.Hash,type:"primary",target:"_blank"}},[e._v("交易正在确认中。。。")])],1):e._e()],1)],2)],1)])],1)},n=[],r=(i("7f7f"),{data:function(){return{Trading:!1,Hash:"",dynamicValidateForm:{option:[{value:""},{value:""}],name:"",date:"",addr:"undefined"!==typeof ethereum?ethereum.selectedAddress:null},pickerOptions:{shortcuts:[{text:"明天",onClick:function(e){var t=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",t)}},{text:"一周后",onClick:function(e){var t=new Date;t.setTime(t.getTime()+6048e5),e.$emit("pick",t)}},{text:"一个月后",onClick:function(e){var t=new Date;t.setTime(t.getTime()+26784e5),e.$emit("pick",t)}}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(i){if(!i)return console.log("错误提交！"),!1;t.$confirm("确认创建？").then(function(i){for(var a=t.dynamicValidateForm.name,n=[],r=parseInt((t.dynamicValidateForm.date.getTime()-(new Date).getTime())/1e3),o=t.dynamicValidateForm.addr,l=0;l<t.dynamicValidateForm.option.length;l++)n.push(t.dynamicValidateForm.option[l]["value"]);t.InitiateEvent(a,n,r,o),t.resetForm(e)})})},resetForm:function(e){this.$refs[e].resetFields()},removeOption:function(e){var t=this.dynamicValidateForm.option.indexOf(e);-1!==t&&this.dynamicValidateForm.option.splice(t,1)},addOption:function(){this.dynamicValidateForm.option.push({value:"",key:Date.now()})},InitiateEvent:function(e,t,i,a){this.$Connection();var n=this;this.$InitiateEvent(e,t,i,a).on("transactionHash",function(e){n.notify(e),n.Hash=e,n.Trading=!0}).on("confirmation",function(e,t){}).on("receipt",function(e){n.notify1("成功","交易成功","success"),n.Trading=!1}).on("error",function(e){n.notify1("失败","交易失败，详情见MetaMask","error",0)})},notify:function(e){var t=this.$createElement;this.$notify({title:"交易Hash,详情见MetaMask",message:t("i",{style:"color: teal"},e)})},notify1:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4500;this.$notify({title:e,message:t,type:i,duration:a})}}}),o=r,l=(i("37b3"),i("2877")),s=Object(l["a"])(o,a,n,!1,null,null,null);t["default"]=s.exports},"121d":function(e,t,i){},"37b3":function(e,t,i){"use strict";var a=i("121d"),n=i.n(a);n.a},"7f7f":function(e,t,i){var a=i("86cc").f,n=Function.prototype,r=/^\s*function ([^ (]*)/,o="name";o in n||i("9e1e")&&a(n,o,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-4b8a5e2e.c65b3819.js.map